<HTML>
<CENTER><A HREF = "Intro.html">Previous Section</A> - <A HREF = "http://phish.sandia.gov">PHISH WWW Site</A> -
<A HREF = "Manual.html">LAMMPS Documentation</A> - <A HREF = "Minnows.html">Next Section</A> 
</CENTER>




<HR>

<H3>2. Bait.py Setup Tool 
</H3>
<P>Bait.py is a Python program which converts a PHISH input script into a
MPI configuration file or shell script which can be used to launch a
school of minnows, i.e. to run a PHISH calculation.  You can edit the
input script or pass it different parameters via bait.py command-line
arguments to change the calculation, in which case you need to rerun
bait.py to create a new launch script.
</P>
<P>The remainder of this page discusses how bait.py is used and how a
PHISH input script is formatted.  There are separate doc pages for
each PHISH input script command recognized by bait.py.
</P>
<UL><LI><A HREF = "#bait_1">Running bait.py</A> 

<LI><A HREF = "#bait_2">Command-line arguments</A> 

<LI><A HREF = "#bait_3">Input script syntax and parsing</A> 

<LI>Input script commands 

<UL><LI> <A HREF = "bait_variable.html">variable</A> 

<LI> <A HREF = "bait_set.html">set</A> 

<LI> <A HREF = "bait_minnow.html">minnow</A> 

<LI> <A HREF = "bait_connect.html">connect</A> 

<LI> <A HREF = "bait_layout.html">layout</A> 
</UL>

</UL>
<P>NOTE" include a diagram of a simple algorithm (e.g. MapReduce word
count), show the corresponding PHISH input script?
</P>
<HR>

<HR>

<A NAME = "bait_1"></A><H4>Running bait.py 
</H4>
<P>The bait.py Python script is in the bait sub-directory of the
distribution.
</P>
<P>To run it on an input script in another directory, you
simply point to it.
</P>
<P>use python
or edit the first line of bait.py
make sure it is executable via chmod
</P>
<P>bait.py -switch values ... < in.script
</P>
<P>Command-line args for -switch and their values are discussed in
the next section.
</P>
<HR>

<A NAME = "bait_1"></A><H4>Command-line arguments 
</H4>
<P>each has a default
</P>
<P>-np Np
 Np = process count
 default = 1
-var ID str1 str2 ...
 assign strings to a variable ID
 default = no variables defined
-output filename
 filename = MPI config file to create
 default = "outfile"
-path path1:path2:path3:...
 colon-seperated paths to prepend to app executable names
 default = "."
-mode style
 manner in launching PHISH job
 style = "mpich" or "openmpi" or "socket"
 default = "mpich"
</P>
<P>each switch has an allowed abbreviation
</P>
<P>-np or -n
-var or -v
-configfile or -c
-path or -p
-mode or -m
</P>
<P>NOTE: does np have to match layout sum?
</P>
<HR>

<A NAME = "bait_1"></A><H4>Input script syntax and parsing 
</H4>
<P>A PHISH input script is a text file that
contains commands recognized by the bait.py tool.
</P>
<P>command = name + args, separated by whitespace
</P>
<P>continuation char
</P>
<P>parsing rules
</P>
<P>blank lines OK
comment char = #, delete all trailing
continuation char = &, with nothing following (including spaces)
</P>
<P>variables are as follows ...
</P>
<P>variable substitution:
</P>
<P>what are rules for this?
should probably be $a for single-char variable, $<I>abc</I> for multichar
</P>
</HTML>
