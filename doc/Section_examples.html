<HTML>
<CENTER><A HREF = "Section_library.html">Previous Section</A> - <A HREF = "http://www.sandia.gov/~sjplimp/phish.html">PHISH WWW Site</A> -
<A HREF = "Manual.html">PHISH Documentation</A> - <A HREF = "Section_python.html">Next Section</A> 
</CENTER>




<HR>

<H3>5. Examples 
</H3>
<P>This is the list of PHISH input scripts provided in the example
directory of the distribution.  Many of them use minnows which come in
2 flavors in the minnow directory, written in C++ or Python.  The
scripts can thus be edited to use all C++ or all Python minnows or a
mixture of the two in the same PHISH net.  See the comment lines at
the top of each script for instructions on what variables can be
defined via command-line arguements to the <A HREF = "Section_bait.html">bait.py</A>
tool.
</P>
<UL><LI><A HREF = "#filelist">in.filelist</A>
<LI><A HREF = "#hook">in.hook</A>
<LI><A HREF = "#slow">in.slow</A>
<LI><A HREF = "#wordcount">in.wordcount</A>
<LI><A HREF = "#wrapsink">in.wrapsink</A>
<LI><A HREF = "#wrapsource">in.wrapsource</A>
<LI><A HREF = "#wrapsourcefile">in.wrapsourcefile</A>
<LI><A HREF = "#wrapss">in.wrapss</A> 
</UL>
<HR>

<HR>

<H4><A NAME = "wordcount"></A>in.filelist 
</H4>
<P>This script simply prints a list of files.  It uses the
<A HREF = "filegen.html">filegen</A> and <A HREF = "print.html">print</A> minnows.
</P>
<P>It can process a large corpus of files by specifying one or more
directory names as arguments to the <A HREF = "filegen.html">filegen</A> minnow via
the variable "files".
</P>
<P>Here is an example of how to run the script with bait.py:
</P>
<PRE>python ../bait/bait.py -v files in.* -p ../minnow < in.filelist 
</PRE>
<HR>

<H4><A NAME = "wordcount"></A>in.hook 
</H4>
<P>This script generates a diagram of the various styles of hook
connections that can be made between schools of minnows via the
bait.py hook command.  It is not meant to be run as a parallel
program, only processed by the bait.py tool.
</P>
<P>Here is an example of how to run the script with bait.py:
</P>
<PRE>python ../bait/bait.py -b graphviz < in.hook 
</PRE>
<P>The resulting dot file can be visualized via the <A HREF = "http://www.graphviz.org">GraphViz
tools</A>.
</P>
<HR>

<H4><A NAME = "wordcount"></A>in.slow 
</H4>
<P>This script prints words from files while using a slowdown minnow to
make it operate more slowly.  It uses the <A HREF = "filegen.html">filegen</A>,
<A HREF = "readfile.html">file2words</A>, <A HREF = "slowdown.html">slowdown</A>, and
<A HREF = "print.html">print</A> minnows.
</P>
<P>See the input script for variables that can be set, including the
delay invoked by the slowdown minnow via the variable "delta".
</P>
<P>Here is an example of how to run the script with bait.py:
</P>
<PRE>python ../bait/bait.py -v files in.* -v delta 1.0 -p ../minnow < in.slow 
</PRE>
<HR>

<H4><A NAME = "wordcount"></A>in.wordcount 
</H4>
<P>This script performs a word frequency count across a set of input text
files, similar to a MapReduce operation.  It uses the
<A HREF = "filegen.html">filegen</A>, <A HREF = "file2words.html">file2words</A>,
<A HREF = "count.html">count</A>, <A HREF = "sort.html">sort</A>, and <A HREF = "print.html">print</A> minnows,
connected as diagramed in <A HREF = "Section_intro.html#intro_5">this section</A> of
the <A HREF = "Section_intro.html">Introduction</A>.
</P>
<P>See the input script for variables that can be set, including the
number of file2words and count minnows for parallelism.  The script
can process a large corpus of files by specifying one or more
directory names as arguments to the <A HREF = "filegen.html">filegen</A> minnow via
the variable "files".
</P>
<P>Here is an example of how to run the script with bait.py:
</P>
<PRE>python ../bait/bait.py -v files in.* -p ../minnow < in.wordcount 
</PRE>
<HR>

<H4><A NAME = "wrapsink"></A>in.wrapsink 
</H4>
<P>This script demonstrates the use of the <A HREF = "wrapsink.html">wrapsink</A>
minnow which is used to wrap a non-PHISH application.  Wrapsink passes
string datums it receives to any program thru stdin.  The script uses
the <A HREF = "reverse.html">reverse</A> program in the minnow dir to reverse the
name of each file generated by the <A HREF = "filegen.html">filegen</A> minnow.
</P>
<P>Here is an example of how to run the script with bait.py:
</P>
<PRE>python ../bait/bait.py -v files in.* -p ../minnow < in.wrapsink 
</PRE>
<HR>

<H4><A NAME = "wrapsource"></A>in.wrapsource 
</H4>
<P>This script demonstrates the use of the <A HREF = "wrapsource.html">wrapsource</A>
minnow which is used to wrap a non-PHISH application.  Wrapsource
invokes the application and reads its output from stdout, a line at a
time.  The line is converted to a string datum which is sent
downstream to other minnows.  The script uses the shell command "ls *"
as its program and sends its output to the <A HREF = "print.html">print</A> minnow.
Thus a list of filenames in the directory is generated.
</P>
<P>Here is an example of how to run the script with bait.py:
</P>
<PRE>python ../bait/bait.py -p ../minnow < in.wrapsource 
</PRE>
<HR>

<H4><A NAME = "wrapsourcefile"></A>in.wrapsourcefile 
</H4>
<P>This script demonstrates the use of the <A HREF = "wrapsource.html">wrapsource</A>
minnow with its optional file input, which is used to wrap a non-PHISH
application.  Wrapsource takes filenames as received datums, and
invokes the application for each one, then reads its output from
stdout, a line at a time.  The line is converted to a string datum
which is sent downstream to other minnows.  The script uses the shell
command "wc %s" as its program, where the "%s" represents the filename
that is substituted for each time the program is invoked.  It sends
its output to the <A HREF = "print.html">print</A> minnow.  Thus a list of filename
sizes is generated.
</P>
<P>See the input script for variables that can be set, including the
number of wrapsource minnows for parallelism.  The script can process
a large corpus of files by specifying one or more directory names as
arguments to the <A HREF = "filegen.html">filegen</A> minnow via the variable
"files".
</P>
<P>Here is an example of how to run the script with bait.py:
</P>
<PRE>python ../bait/bait.py -p ../minnow -v files in.* < in.wrapsourcefile 
</PRE>
<HR>

<H4><A NAME = "wrappss"></A>in.wrapss 
</H4>
<P>This script demonstrates the use of the <A HREF = "wrapss.html">wrapss</A> minnow
which is used to wrap a non-PHISH application.  Wrapss takes string
datums and passes them to the stdin as lines of input to a running
application.  It also polls the application for output written to
stdout, which it reads a line at a time.  The line is converted to a
string datum which is sent downstream to other minnows.  The script
uses the <A HREF = "echo.html">echo</A> or <A HREF = "reverse.html">reverse</A> programs in the
minnow dir as the application.  Thus a list of filenames is printed,
in reverse order if desired.
</P>
<P>The script can process a large corpus of files by specifying one or
more directory names as arguments to the <A HREF = "filegen.html">filegen</A> minnow
via the variable "files".
</P>
<P>Here is an example of how to run the script with bait.py:
</P>
<PRE>python ../bait/bait.py -v files in.* -p ../minnow < in.wrapss 
</PRE>
</HTML>
